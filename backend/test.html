<!-- <form
	action="http://127.0.0.1:5000/api/series"
	method="POST"
	enctype="multipart/form-data"
>
	<label> series thumbanil</label>
	<input type="file" name="series_thumbnail" />
	<label>Series Name</label>
	<input type="text" name="series_title" />
	<label>Genre</label>
	<input type="text" name="series_genres" />
	<label>Genre</label>
	<input type="text" name="series_genres" />
	<label>Genre</label>
	<input type="text" name="series_genres" />

	<label>staff name</label>
	<input type="text" name="series_staff[0][name]" />
	<label>staff surname</label>
	<input type="text" name="series_staff[0][surname]" />
	<label>staff role</label>
	<input type="text" name="series_staff[0][role]" />

	<label>staff name</label>
	<input type="text" name="series_staff[1][name]" />
	<label>staff surname</label>
	<input type="text" name="series_staff[1][surname]" />
	<label>staff role</label>
	<input type="text" name="series_staff[1][role]" />

	<label>Episode Description:</label>
	<textarea name="series_desc"></textarea>
	<label>Year of Production:</label>
	<textarea name="series_year_of_production"></textarea>
	<br />
	<br />
	<div>
		<label>thumbanil</label>
		<input type="file" name="video_thumbnails" />

		<label>File</label>
		<input type="file" name="videos" />
		<br />
		<label>Title:</label>
		<input type="text" name="episode_titles" />
		<label>Episode Description:</label>
		<textarea name="episode_desc"></textarea>
	</div>
	<br />
	<br />
	<br />
	<div>
		<label>thumbanil</label>
		<input type="file" name="video_thumbnails" />

		<label>File</label>
		<input type="file" name="videos" />
		<br />
		<label>Title:</label>
		<input type="text" name="episode_titles" />
		<label>Episode Description:</label>
		<textarea name="episode_desc"></textarea>
	</div>
	<button type="submit">Upload</button>
</form> -->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Socket Thing1</title>
	</head>
	<body>
		Client1
		<video
			src="http://localhost:5000/api/videos/656623c900a0869bc3cda3b2"
			controls
			autoplay
		></video>
	</body>
	<script>
		// Create WebSocket connection.
		const socket = new WebSocket("ws://localhost:5000");
		const video = document.querySelector("video");
		socket.binaryType = "arrayBuffer";

		video.addEventListener("play", (event) => {
			console.log(video);
			socket.send(["play", video.currentTime]);
		});

		video.addEventListener("pause", (event) => {
			socket.send(["pause", video.currentTime]);
		});

		video.addEventListener("timeupdate", (event) => {
			socket.send(["timeupdate", video.currentTime]);
		});

		// Connection opened
		socket.addEventListener("open", function (event) {
			console.log("Connected to WS Server");
		});

		// Listen for messages
		socket.addEventListener("message", function (event) {
			// let data = JSON.stringify(event.data);
			let arrData = event.data.split(",");
			console.log(arrData[1] - video.currentTime);

			if (arrData[0] == "play") {
				video.currentTime = parseFloat(arrData[1]);
				video.play();
			}
			if (arrData[0] == "pause") {
				video.pause();
			}
			if (arrData[0] == "timeupdate") {
				console.log("cos");
				if (
					arrData[1] - video.currentTime > 5 ||
					arrData[1] - video.currentTime < -5
				) {
					video.currentTime = parseFloat(arrData[1]);
					video.play();
				}
			}

			console.log("Message from server ");
		});

		const sendMessage = () => {
			socket.send("Hello From Client1!");
		};
	</script>
</html>
